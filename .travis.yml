sudo: true
language: python
python:
  - "3.6"
before_install:
  - chmod +x ./bin/*.sh
  - pip install pipenv
install:
  - "./bin/prepare.sh"
script:
  - echo "[ci] running tests against $(pipenv run python --version) ..."
  - "./bin/run.sh"
jobs:
  include:
    - stage: deploy
      python: 3.6
      script:
        - echo "[ci] deploying to pypi..."
        - "./bin/release.sh"
branches:
  only:
    - master
deploy:
  skip_existing: true
  skip_cleanup: true
  on:
    branch: master
env:
  global:
    - secure: dW9P63NQjWGdhfBsnzGXSC24zn16Vp3bI1JHezZ3ylD1ngixh14ikORdEt9WvJaol4n55C7FidS3yGCUDrdKyxZil+Rqdt1qtOJ5cpKwiqIPfPs1GdlelS/zD2NEqAM/AAxfiKWbAbqNMme+f/0H/HV7lYlbRIH0Uj/GUCvUu7hk8Fand2JeetCBhMs9pcNkmAEMrvMLdFloABtbDYqubmHB2Q+j8KiiYDVX8GE+HRhRnQCcIkZa82/QvDDcWLDdDbor+xw2sUmqJzabwVEyj+61Qp7coWnvT3Yt9dqvHznyPnVPrxUn1w0ZiO/2PuE1Z98kpKVADkNBqfg5jOq7qG+V9/pf/DCB7nq6zmFZJs8nQRap9ePnETChLuXcYuKLbSUCrDDvT/0hVMBD7dPcWN3oLuiHw6JmazxHuojq6ZX+J1aVuOsrbqg0+7H3kizsmAUQSJhY+eOKz6R0G8Flfkr6M3+4j19yZlbF+nzBGjgP20wdRXlIMDcemS54kLuYE77p+yFn3RPH9IrVmWXXyh2pahWcl+VFMM2Yt6MjMc9bXpFSBin3hfKTP0j0VuUgo8TnMh2cL8+p3cCpAXTIrKrb5MArYARB8v0++EKKS13JPiC0rzQh7uRy37wT3SDnZ95CyUQ48uEe2xPc2JoDLK8qogI+rYgXlXen2NokygI=
    - secure: Hd3vIQdZXmhwYtSgGgxY85QsxQGGo7wGYbMFodp0cq0ldcx+bsBW5jAUuHWvrJ6z3CmWyF/lpefvQwfxnr5iZ+BTMDJH5d+T7xRw3UFmOhkEJPw8lBQbqniY6HguZl/BqvMCRN0tYWC8/Uy2ry2LpvWJLH4eGnQkqyAcka7ex9r/GATlAGJ+tOObEIb47iBdSVLfaNHeCxoilvezwOq8nJshz5IxVW0B16gfHAYuWR4GBMmkSiNqG+SUiRUL1fAls2CH7AMjX0oJAR4tDSJ8PpJlDnw+7J9+qDKnF5hRcDY9oz1baGWRaimeOYnzEtxgpqBnv1ZzMBFKpaMWTs0zmrh6SQYCV9Rxy6Khyu7fwF4OmXo9MVgb9RkxY2QsOx8dUo+UgnrkkYmxQa2hzaYIxk68H6we7fos/W/kG0RaeYSgBoa67cYHUPOmiMWWwyks187YPjnd+De0gjFrxdEjjD/IqjOqajfr/H9axmL0y/0GIsxWtNvHLa2bqA4tPt2Iai7V28KI59mUArWtDDsIyTs0OdNUl8VVJmF8TWUVHV9GBhWgqoT8ggzBnmvpyFMuwXrcWsa05FYX20SlOetyRqy1IEbHCB7eM1UUTz6JiZpvR7aa3hWJ8eSPsR1R3lOWh1m9yRTVLJShfmZ53gutxOyK26Y9s7oERJB29RnjIbE=
